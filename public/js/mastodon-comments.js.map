{"version":3,"sources":["file:///F:/Websites/cassiedotink/themes/neverhungoveragain/assets/js/mastodon-comments.js"],"sourcesContent":["const styles = `\n:root {\n  --font-color: #5d686f;\n  --font-size: 1.0rem;\n\n  --block-border-width: 1px;\n  --block-border-radius: 3px;\n  --block-border-color: #ededf0;\n  --block-background-color: #f7f8f8;\n\n  --comment-indent: 40px;\n}\n\nmastodon-comments {\n  font-size: var(--font-size);\n}\n\np {\n  margin: 0 0 1rem 0;\n}\n\n#mastodon-stats {\n  text-align: center;\n  font-size: calc(var(--font-size) * 1.5);\n}\n\n#mastodon-title {\n  font-size: calc(var(--font-size) * 1.5);\n  font-weight: bold;\n}\n\n#mastodon-comments-list {\n  margin: 0 auto;\n  padding: 0;\n}\n\n#mastodon-comments-list ul {\n  padding-left: var(--comment-indent);\n}\n\n#mastodon-comments-list li {\n  list-style: none;\n}\n\n.mastodon-comment {\n  background-color: var(--block-background-color);\n  border-radius: var(--block-border-radius);\n  border: var(--block-border-width) var(--block-border-color) solid;\n  padding: 15px;\n  margin-bottom: 1.5rem;\n  display: flex;\n  flex-direction: column;\n  color: var(--font-color);\n}\n\n.mastodon-comment p {\n  margin-bottom: 0px;\n}\n\n.mastodon-comment .author {\n  padding-top:0;\n  display:flex;\n}\n\n.mastodon-comment .author a {\n  text-decoration: none;\n}\n\n.mastodon-comment .author .avatar img {\n  margin-right:1rem;\n  min-width:60px;\n  border-radius: 5px;\n}\n\n.mastodon-comment .author .details {\n  display: flex;\n  flex-direction: column;\n  line-height: 1.2em;\n}\n\n.mastodon-comment .author .details .name {\n  font-weight: bold;\n}\n\n.mastodon-comment .author .details .user {\n  color: #5d686f;\n  font-size: medium;\n}\n\n.mastodon-comment .author .date {\n  margin-left: auto;\n  font-size: small;\n}\n\n.mastodon-comment .content {\n  margin: 15px 0;\n  line-height: 1.5em;\n}\n\n.mastodon-comment .author .details a,\n.mastodon-comment .content p {\n  margin-bottom: 10px;\n}\n\n.mastodon-comment .attachments {\n  margin: 0px 10px;\n}\n\n.mastodon-comment .attachments \u003e * {\n  margin: 0px 10px;\n}\n\n.mastodon-comment .attachments img {\n  max-width: 100%;\n}\n\n.mastodon-comment .status \u003e div, #mastodon-stats \u003e div {\n  display: inline-block;\n  margin-right: 15px;\n}\n\n.mastodon-comment .status a, #mastodon-stats a {\n  color: #5d686f;\n  text-decoration: none;\n}\n\n.mastodon-comment .status .replies.active a, #mastodon-stats .replies.active a {\n  color: #003eaa;\n}\n\n.mastodon-comment .status .reblogs.active a, #mastodon-stats .reblogs.active a {\n  color: #8c8dff;\n}\n\n.mastodon-comment .status .favourites.active a, #mastodon-stats .favourites.active a {\n  color: #ca8f04;\n}\n`;\n\nclass MastodonComments extends HTMLElement {\n  constructor() {\n    super();\n\n    this.host = this.getAttribute(\"host\");\n    this.user = this.getAttribute(\"user\");\n    this.tootId = this.getAttribute(\"tootId\");\n\n    this.commentsLoaded = false;\n\n    const styleElem = document.createElement(\"style\");\n    styleElem.innerHTML = styles;\n    document.head.appendChild(styleElem);\n  }\n\n  connectedCallback() {\n    this.innerHTML = `\n      \u003cdiv id=\"mastodon-stats\"\u003e\u003c/div\u003e\n      \u003cdiv id=\"mastodon-title\"\u003eComments\u003c/div\u003e\n\n      \u003cnoscript\u003e\n        \u003cdiv id=\"error\"\u003e\n          Please enable JavaScript to view the comments powered by the Fediverse.\n        \u003c/div\u003e\n      \u003c/noscript\u003e\n\n      \u003cp\u003eYou can use your Fediverse (i.e. Mastodon, among many others) account to reply to this \u003ca class=\"link\"\n          href=\"https://${this.host}/@${this.user}/${this.tootId}\" rel=\"ugc\"\u003epost\u003c/a\u003e.\n      \u003c/p\u003e\n      \u003cul id=\"mastodon-comments-list\"\u003e\u003c/ul\u003e\n    `;\n\n    const comments = document.getElementById(\"mastodon-comments-list\");\n    const rootStyle = this.getAttribute(\"style\");\n    if (rootStyle) {\n      comments.setAttribute(\"style\", rootStyle);\n    }\n    this.respondToVisibility(comments, this.loadComments.bind(this));\n  }\n\n  escapeHtml(unsafe) {\n    return (unsafe || \"\")\n      .replace(/\u0026/g, \"\u0026amp;\")\n      .replace(/\u003c/g, \"\u0026lt;\")\n      .replace(/\u003e/g, \"\u0026gt;\")\n      .replace(/\"/g, \"\u0026quot;\")\n      .replace(/'/g, \"\u0026#039;\");\n  }\n\n  toot_active(toot, what) {\n    var count = toot[what + \"_count\"];\n    return count \u003e 0 ? \"active\" : \"\";\n  }\n\n  toot_count(toot, what) {\n    var count = toot[what + \"_count\"];\n    return count \u003e 0 ? count : \"\";\n  }\n\n  toot_stats(toot) {\n    return `\n      \u003cdiv class=\"replies ${this.toot_active(toot, \"replies\")}\"\u003e\n        \u003ca href=\"${\n          toot.url\n        }\" rel=\"ugc nofollow\"\u003e\u003ci class=\"fa fa-reply fa-fw\"\u003e\u003c/i\u003e${this.toot_count(\n          toot,\n          \"replies\",\n        )}\u003c/a\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"reblogs ${this.toot_active(toot, \"reblogs\")}\"\u003e\n        \u003ca href=\"${\n          toot.url\n        }/reblogs\" rel=\"nofollow\"\u003e\u003ci class=\"fa fa-retweet fa-fw\"\u003e\u003c/i\u003e${this.toot_count(\n          toot,\n          \"reblogs\",\n        )}\u003c/a\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"favourites ${this.toot_active(toot, \"favourites\")}\"\u003e\n        \u003ca href=\"${\n          toot.url\n        }/favourites\" rel=\"nofollow\"\u003e\u003ci class=\"fa fa-star fa-fw\"\u003e\u003c/i\u003e${this.toot_count(\n          toot,\n          \"favourites\",\n        )}\u003c/a\u003e\n      \u003c/div\u003e\n    `;\n  }\n\n  user_account(account) {\n    var result = `@${account.acct}`;\n    if (account.acct.indexOf(\"@\") === -1) {\n      var domain = new URL(account.url);\n      result += `@${domain.hostname}`;\n    }\n    return result;\n  }\n\n  render_toots(toots, in_reply_to) {\n    var tootsToRender = toots\n      .filter((toot) =\u003e toot.in_reply_to_id === in_reply_to)\n      .sort((a, b) =\u003e a.created_at.localeCompare(b.created_at));\n    tootsToRender.forEach((toot) =\u003e this.render_toot(toots, toot));\n  }\n\n  render_toot(toots, toot) {\n    toot.account.display_name = this.escapeHtml(toot.account.display_name);\n    toot.account.emojis.forEach((emoji) =\u003e {\n      toot.account.display_name = toot.account.display_name.replace(\n        `:${emoji.shortcode}:`,\n        `\u003cimg src=\"${this.escapeHtml(emoji.static_url)}\" alt=\"Emoji ${\n          emoji.shortcode\n        }\" height=\"20\" width=\"20\" /\u003e`,\n      );\n    });\n\n    const formatDate = (dateString) =\u003e {\n      return new Date(dateString).toLocaleString('en-US', {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: '2-digit',\n        minute: '2-digit',\n        hour12: false,\n        formatMatcher: 'basic'\n      }).replace(',', '').replace(/(\\d+)\\/(\\d+)\\/(\\d+)/, '$3-$1-$2')\n    }\n\n    const mastodonComment = `\n      \u003carticle class=\"mastodon-comment\"\u003e\n        \u003cdiv class=\"author\"\u003e\n          \u003cdiv class=\"avatar\"\u003e\n            \u003cimg src=\"${this.escapeHtml(\n              toot.account.avatar_static,\n            )}\" height=60 width=60 alt=\"\"\u003e\n          \u003c/div\u003e\n          \u003cdiv class=\"details\"\u003e\n            \u003ca class=\"name\" href=\"${toot.account.url}\" rel=\"nofollow\"\u003e${\n              toot.account.display_name\n            }\u003c/a\u003e\n            \u003ca class=\"user\" href=\"${\n              toot.account.url\n            }\" rel=\"nofollow\"\u003e${this.user_account(toot.account)}\u003c/a\u003e\n          \u003c/div\u003e\n          \u003ca class=\"date\" href=\"${\n            toot.url\n          }\" rel=\"nofollow\"\u003e\n              \u003ctime datetime=\"${toot.created_at}\"\u003e\n                ${formatDate(toot.created_at)}${toot.edited_at ? \"*\" : \"\"}\n              \u003c/time\u003e\n          \u003c/a\u003e\n        \u003c/div\u003e\n        \u003cdiv class=\"content\"\u003e${toot.content}\u003c/div\u003e\n        \u003cdiv class=\"attachments\"\u003e\n          ${toot.media_attachments\n            .map((attachment) =\u003e {\n              if (attachment.type === \"image\") {\n                return `\u003ca href=\"${attachment.url}\" rel=\"ugc nofollow\"\u003e\u003cimg src=\"${\n                  attachment.preview_url\n                }\" alt=\"${this.escapeHtml(attachment.description)}\" loading=\"lazy\" /\u003e\u003c/a\u003e`;\n              } else if (attachment.type === \"video\") {\n                return `\u003cvideo controls preload=\"none\"\u003e\u003csource src=\"${attachment.url}\" type=\"${attachment.mime_type}\"\u003e\u003c/video\u003e`;\n              } else if (attachment.type === \"gifv\") {\n                return `\u003cvideo autoplay loop muted playsinline\u003e\u003csource src=\"${attachment.url}\" type=\"${attachment.mime_type}\"\u003e\u003c/video\u003e`;\n              } else if (attachment.type === \"audio\") {\n                return `\u003caudio controls\u003e\u003csource src=\"${attachment.url}\" type=\"${attachment.mime_type}\"\u003e\u003c/audio\u003e`;\n              } else {\n                return `\u003ca href=\"${attachment.url}\" rel=\"ugc nofollow\"\u003e${attachment.type}\u003c/a\u003e`;\n              }\n            })\n            .join(\"\")}\n        \u003c/div\u003e\n        \u003cdiv class=\"status\"\u003e\n          ${this.toot_stats(toot)}\n        \u003c/div\u003e\n      \u003c/article\u003e\n    `;\n\n    var li = document.createElement(\"li\");\n    li.setAttribute(\"id\", toot.id)\n    li.innerHTML =\n      typeof DOMPurify !== \"undefined\"\n        ? DOMPurify.sanitize(mastodonComment.trim())\n        : mastodonComment.trim();\n\n    if (toot.in_reply_to_id === this.tootId) {\n    document\n      .getElementById(\"mastodon-comments-list\")\n        .appendChild(li);\n    } else {\n        const parentToot = toots.find(t =\u003e t.id === toot.in_reply_to_id);\n        if (parentToot) {\n            const ul = document.createElement('ul');\n            document\n              .getElementById(toot.in_reply_to_id)\n              .appendChild(ul)\n              .appendChild(li);\n        }\n    }\n\n    this.render_toots(toots, toot.id);\n  }\n\n  loadComments() {\n    if (this.commentsLoaded) return;\n\n    document.getElementById(\"mastodon-comments-list\").innerHTML =\n      \"Loading comments from the Fediverse...\";\n\n    let _this = this;\n\n    fetch(\"https://\" + this.host + \"/api/v1/statuses/\" + this.tootId)\n      .then((response) =\u003e response.json())\n      .then((toot) =\u003e {\n        document.getElementById(\"mastodon-stats\").innerHTML =\n          this.toot_stats(toot);\n      });\n\n    fetch(\n      \"https://\" + this.host + \"/api/v1/statuses/\" + this.tootId + \"/context\",\n    )\n      .then((response) =\u003e response.json())\n      .then((data) =\u003e {\n        if (\n          data[\"descendants\"] \u0026\u0026\n          Array.isArray(data[\"descendants\"]) \u0026\u0026\n          data[\"descendants\"].length \u003e 0\n        ) {\n          document.getElementById(\"mastodon-comments-list\").innerHTML = \"\";\n          _this.render_toots(data[\"descendants\"], _this.tootId, 0);\n        } else {\n          document.getElementById(\"mastodon-comments-list\").innerHTML =\n            \"\u003cp\u003eNo comments found\u003c/p\u003e\";\n        }\n\n        _this.commentsLoaded = true;\n      });\n  }\n\n  respondToVisibility(element, callback) {\n    var options = {\n      root: null,\n    };\n\n    var observer = new IntersectionObserver((entries, observer) =\u003e {\n      entries.forEach((entry) =\u003e {\n        if (entry.intersectionRatio \u003e 0) {\n          callback();\n        }\n      });\n    }, options);\n\n    observer.observe(element);\n  }\n}\n\ncustomElements.define(\"mastodon-comments\", MastodonComments);\n"],"mappings":";;AAAA,MAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA2If,MAAM,mBAAN,cAA+B,YAAY;AAAA,IACzC,cAAc;AACZ,YAAM;AAEN,WAAK,OAAO,KAAK,aAAa,MAAM;AACpC,WAAK,OAAO,KAAK,aAAa,MAAM;AACpC,WAAK,SAAS,KAAK,aAAa,QAAQ;AAExC,WAAK,iBAAiB;AAEtB,YAAM,YAAY,SAAS,cAAc,OAAO;AAChD,gBAAU,YAAY;AACtB,eAAS,KAAK,YAAY,SAAS;AAAA,IACrC;AAAA,IAEA,oBAAoB;AAClB,WAAK,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAWK,KAAK,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,MAAM;AAAA;AAAA;AAAA;AAK5D,YAAM,WAAW,SAAS,eAAe,wBAAwB;AACjE,YAAM,YAAY,KAAK,aAAa,OAAO;AAC3C,UAAI,WAAW;AACb,iBAAS,aAAa,SAAS,SAAS;AAAA,MAC1C;AACA,WAAK,oBAAoB,UAAU,KAAK,aAAa,KAAK,IAAI,CAAC;AAAA,IACjE;AAAA,IAEA,WAAW,QAAQ;AACjB,cAAQ,UAAU,IACf,QAAQ,MAAM,OAAO,EACrB,QAAQ,MAAM,MAAM,EACpB,QAAQ,MAAM,MAAM,EACpB,QAAQ,MAAM,QAAQ,EACtB,QAAQ,MAAM,QAAQ;AAAA,IAC3B;AAAA,IAEA,YAAY,MAAM,MAAM;AACtB,UAAI,QAAQ,KAAK,OAAO,QAAQ;AAChC,aAAO,QAAQ,IAAI,WAAW;AAAA,IAChC;AAAA,IAEA,WAAW,MAAM,MAAM;AACrB,UAAI,QAAQ,KAAK,OAAO,QAAQ;AAChC,aAAO,QAAQ,IAAI,QAAQ;AAAA,IAC7B;AAAA,IAEA,WAAW,MAAM;AACf,aAAO;AAAA,4BACiB,KAAK,YAAY,MAAM,SAAS,CAAC;AAAA,mBAEnD,KAAK,GACP,yDAAyD,KAAK;AAAA,QAC5D;AAAA,QACA;AAAA,MACF,CAAC;AAAA;AAAA,4BAEmB,KAAK,YAAY,MAAM,SAAS,CAAC;AAAA,mBAEnD,KAAK,GACP,+DAA+D,KAAK;AAAA,QAClE;AAAA,QACA;AAAA,MACF,CAAC;AAAA;AAAA,+BAEsB,KAAK,YAAY,MAAM,YAAY,CAAC;AAAA,mBAEzD,KAAK,GACP,+DAA+D,KAAK;AAAA,QAClE;AAAA,QACA;AAAA,MACF,CAAC;AAAA;AAAA;AAAA,IAGP;AAAA,IAEA,aAAa,SAAS;AACpB,UAAI,SAAS,IAAI,QAAQ,IAAI;AAC7B,UAAI,QAAQ,KAAK,QAAQ,GAAG,MAAM,IAAI;AACpC,YAAI,SAAS,IAAI,IAAI,QAAQ,GAAG;AAChC,kBAAU,IAAI,OAAO,QAAQ;AAAA,MAC/B;AACA,aAAO;AAAA,IACT;AAAA,IAEA,aAAa,OAAO,aAAa;AAC/B,UAAI,gBAAgB,MACjB,OAAO,CAAC,SAAS,KAAK,mBAAmB,WAAW,EACpD,KAAK,CAAC,GAAG,MAAM,EAAE,WAAW,cAAc,EAAE,UAAU,CAAC;AAC1D,oBAAc,QAAQ,CAAC,SAAS,KAAK,YAAY,OAAO,IAAI,CAAC;AAAA,IAC/D;AAAA,IAEA,YAAY,OAAO,MAAM;AACvB,WAAK,QAAQ,eAAe,KAAK,WAAW,KAAK,QAAQ,YAAY;AACrE,WAAK,QAAQ,OAAO,QAAQ,CAAC,UAAU;AACrC,aAAK,QAAQ,eAAe,KAAK,QAAQ,aAAa;AAAA,UACpD,IAAI,MAAM,SAAS;AAAA,UACnB,aAAa,KAAK,WAAW,MAAM,UAAU,CAAC,gBAC5C,MAAM,SACR;AAAA,QACF;AAAA,MACF,CAAC;AAED,YAAM,aAAa,CAAC,eAAe;AACjC,eAAO,IAAI,KAAK,UAAU,EAAE,eAAe,SAAS;AAAA,UAClD,MAAM;AAAA,UACN,OAAO;AAAA,UACP,KAAK;AAAA,UACL,MAAM;AAAA,UACN,QAAQ;AAAA,UACR,QAAQ;AAAA,UACR,eAAe;AAAA,QACjB,CAAC,EAAE,QAAQ,KAAK,EAAE,EAAE,QAAQ,uBAAuB,UAAU;AAAA,MAC/D;AAEA,YAAM,kBAAkB;AAAA;AAAA;AAAA;AAAA,wBAIJ,KAAK;AAAA,QACf,KAAK,QAAQ;AAAA,MACf,CAAC;AAAA;AAAA;AAAA,oCAGuB,KAAK,QAAQ,GAAG,oBACtC,KAAK,QAAQ,YACf;AAAA,oCAEE,KAAK,QAAQ,GACf,oBAAoB,KAAK,aAAa,KAAK,OAAO,CAAC;AAAA;AAAA,kCAGnD,KAAK,GACP;AAAA,gCACsB,KAAK,UAAU;AAAA,kBAC7B,WAAW,KAAK,UAAU,CAAC,GAAG,KAAK,YAAY,MAAM,EAAE;AAAA;AAAA;AAAA;AAAA,+BAI1C,KAAK,OAAO;AAAA;AAAA,YAE/B,KAAK,kBACJ,IAAI,CAAC,eAAe;AACnB,YAAI,WAAW,SAAS,SAAS;AAC/B,iBAAO,YAAY,WAAW,GAAG,kCAC/B,WAAW,WACb,UAAU,KAAK,WAAW,WAAW,WAAW,CAAC;AAAA,QACnD,WAAW,WAAW,SAAS,SAAS;AACtC,iBAAO,+CAA+C,WAAW,GAAG,WAAW,WAAW,SAAS;AAAA,QACrG,WAAW,WAAW,SAAS,QAAQ;AACrC,iBAAO,uDAAuD,WAAW,GAAG,WAAW,WAAW,SAAS;AAAA,QAC7G,WAAW,WAAW,SAAS,SAAS;AACtC,iBAAO,gCAAgC,WAAW,GAAG,WAAW,WAAW,SAAS;AAAA,QACtF,OAAO;AACL,iBAAO,YAAY,WAAW,GAAG,wBAAwB,WAAW,IAAI;AAAA,QAC1E;AAAA,MACF,CAAC,EACA,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA,YAGT,KAAK,WAAW,IAAI,CAAC;AAAA;AAAA;AAAA;AAK7B,UAAI,KAAK,SAAS,cAAc,IAAI;AACpC,SAAG,aAAa,MAAM,KAAK,EAAE;AAC7B,SAAG,YACD,OAAO,cAAc,cACjB,UAAU,SAAS,gBAAgB,KAAK,CAAC,IACzC,gBAAgB,KAAK;AAE3B,UAAI,KAAK,mBAAmB,KAAK,QAAQ;AACzC,iBACG,eAAe,wBAAwB,EACrC,YAAY,EAAE;AAAA,MACnB,OAAO;AACH,cAAM,aAAa,MAAM,KAAK,OAAK,EAAE,OAAO,KAAK,cAAc;AAC/D,YAAI,YAAY;AACZ,gBAAM,KAAK,SAAS,cAAc,IAAI;AACtC,mBACG,eAAe,KAAK,cAAc,EAClC,YAAY,EAAE,EACd,YAAY,EAAE;AAAA,QACrB;AAAA,MACJ;AAEA,WAAK,aAAa,OAAO,KAAK,EAAE;AAAA,IAClC;AAAA,IAEA,eAAe;AACb,UAAI,KAAK,eAAgB;AAEzB,eAAS,eAAe,wBAAwB,EAAE,YAChD;AAEF,UAAI,QAAQ;AAEZ,YAAM,aAAa,KAAK,OAAO,sBAAsB,KAAK,MAAM,EAC7D,KAAK,CAAC,aAAa,SAAS,KAAK,CAAC,EAClC,KAAK,CAAC,SAAS;AACd,iBAAS,eAAe,gBAAgB,EAAE,YACxC,KAAK,WAAW,IAAI;AAAA,MACxB,CAAC;AAEH;AAAA,QACE,aAAa,KAAK,OAAO,sBAAsB,KAAK,SAAS;AAAA,MAC/D,EACG,KAAK,CAAC,aAAa,SAAS,KAAK,CAAC,EAClC,KAAK,CAAC,SAAS;AACd,YACE,KAAK,aAAa,KAClB,MAAM,QAAQ,KAAK,aAAa,CAAC,KACjC,KAAK,aAAa,EAAE,SAAS,GAC7B;AACA,mBAAS,eAAe,wBAAwB,EAAE,YAAY;AAC9D,gBAAM,aAAa,KAAK,aAAa,GAAG,MAAM,QAAQ,CAAC;AAAA,QACzD,OAAO;AACL,mBAAS,eAAe,wBAAwB,EAAE,YAChD;AAAA,QACJ;AAEA,cAAM,iBAAiB;AAAA,MACzB,CAAC;AAAA,IACL;AAAA,IAEA,oBAAoB,SAAS,UAAU;AACrC,UAAI,UAAU;AAAA,QACZ,MAAM;AAAA,MACR;AAEA,UAAI,WAAW,IAAI,qBAAqB,CAAC,SAASA,cAAa;AAC7D,gBAAQ,QAAQ,CAAC,UAAU;AACzB,cAAI,MAAM,oBAAoB,GAAG;AAC/B,qBAAS;AAAA,UACX;AAAA,QACF,CAAC;AAAA,MACH,GAAG,OAAO;AAEV,eAAS,QAAQ,OAAO;AAAA,IAC1B;AAAA,EACF;AAEA,iBAAe,OAAO,qBAAqB,gBAAgB;","names":["observer"]}